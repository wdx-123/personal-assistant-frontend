---
description: API 服务层规范 - Service 层职责分离
globs: "**/services/*.ts"
alwaysApply: false
---

# API 服务层规范

## Service 层职责

- ✅ 调用 API 接口
- ✅ 返回类型化的数据
- ❌ **不处理错误**（让错误抛出到页面/组件）
- ❌ **不显示提示信息**（Message 在页面中处理）
- ❌ **不跳转路由**（路由跳转在页面中处理）
- ❌ **不更新状态**（状态更新在 Store 中处理）

## 正确示例

```typescript
// ✅ 正确：Service 只负责 API 调用
export const authService = {
  login(data: LoginRequest): Promise<LoginResponse> {
    return apiClient.post('/user/login', data)
  },
  
  logout(): Promise<void> {
    return apiClient.post('/user/logout')
  }
}
```

## 错误示例

```typescript
// ❌ 错误：Service 中处理业务逻辑
export const authService = {
  async login(data: LoginRequest) {
    try {
      const res = await apiClient.post('/user/login', data)
      Message.success('登录成功')  // ❌ 不在这里
      router.push('/home')          // ❌ 不在这里
      return res
    } catch (error) {
      Message.error('登录失败')    // ❌ 不在这里
    }
  }
}
```

## 业务逻辑处理位置

业务逻辑（错误提示、路由跳转、状态更新）应在 **页面组件** 或 **Store** 中处理。
